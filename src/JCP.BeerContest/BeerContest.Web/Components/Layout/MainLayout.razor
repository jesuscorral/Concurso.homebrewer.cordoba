@using BeerContest.Domain.Models
@using Microsoft.AspNetCore.Components.Authorization
@inherits LayoutComponentBase

<div class="page">
    <!-- Top Navigation Bar -->
    <header class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <!-- Brand -->
            <a class="navbar-brand" href="">
                <i class="fa fa-beer fa-lg text-amber"></i>
            </a>

            <!-- Mobile menu toggle -->
            <button class="navbar-toggler" type="button" @onclick="ToggleNav" aria-expanded="@isNavOpen">
                <i class="fa fa-bars"></i>
            </button>

            <!-- Navigation Menu -->
            <div class="navbar-collapse @(isNavOpen ? "show" : "collapse")">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="" @onclick="CloseNav">
                            <i class="fa fa-home" aria-hidden="true"></i> Home
                        </a>
                    </li>
                    <AuthorizeView>
                        <AuthorizeView Roles="@($"{UserRole.Participant}")">
                            <Authorized Context="authContext">
                                <li class="nav-item">
                                    <a class="nav-link" href="my-beers" @onclick="CloseNav">
                                        <i class="fa fa-beer" aria-hidden="true"></i> My Beers
                                    </a>
                                </li>
                            </Authorized>
                        </AuthorizeView>
                    </AuthorizeView>        
                    <li class="nav-item">
                        <a class="nav-link" href="beer-registration" @onclick="CloseNav">
                            <i class="fa fa-plus" aria-hidden="true"></i> Register Beer
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="register-judge" @onclick="CloseNav">
                            <i class="fa fa-gavel" aria-hidden="true"></i> Register as Judge
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container-fluid px-4 py-3">
            @Body
        </div>
    </main>
</div>

<!-- Include navigation JavaScript -->
<script src="~/js/navigation.js"></script>

<div id="blazor-error-ui">
    @if (System.Environment.GetEnvironmentVariable("ASPNETCORE_ENVIRONMENT") == "Development")
    {
        <text>An error has occurred. This application may no longer respond until reloaded.</text>
    }
    else
    {
        <text>An unexpected error has occurred.</text>
    }
    <a href="" class="reload">Reload</a>
    <a class="dismiss">ðŸ—™</a>
</div>

@code {
    private bool isNavOpen = false;

    private void ToggleNav()
    {
        isNavOpen = !isNavOpen;
    }

    private void CloseNav()
    {
        isNavOpen = false;
    }
}
