@page "/"
@using System.Timers
@implements IDisposable
@inject NavigationManager Navigation

<PageTitle>Home - Beer Contest</PageTitle>

<div class="hero-section">
    <div class="hero-background"></div>
    <div class="hero-content">
        <div class="hero-text">
            <h1 class="hero-title">
                <span class="title-main">WHEAT LAGER</span>
                <span class="title-accent">Red Hops</span>
            </h1>
            <p class="hero-description">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut 
                labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco.
            </p>
            <button class="hero-cta-btn" @onclick="NavigateToRegistration">
                <i class="fa fa-arrow-right"></i>
                SEE MORE
            </button>
        </div>
        
        <div class="hero-visual">
            <div class="beer-showcase">
                <div class="beer-glass"></div>
                <div class="beer-bottle"></div>
            </div>
            
            <div class="ingredients-section">
                <h3 class="ingredients-title">INGREDIENTS:</h3>
                <div class="ingredient-item">
                    <i class="ingredient-icon fa fa-wheat"></i>
                    <div class="ingredient-text">
                        <strong>Lorem Ipsum Dolor</strong>
                        <p>Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
                    </div>
                </div>
                <div class="ingredient-item">
                    <i class="ingredient-icon fa fa-leaf"></i>
                    <div class="ingredient-text">
                        <strong>Lorem Ipsum Dolor</strong>
                        <p>Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
                    </div>
                </div>
                <div class="ingredient-item">
                    <i class="ingredient-icon fa fa-tint"></i>
                    <div class="ingredient-text">
                        <strong>Lorem Ipsum Dolor</strong>
                        <p>Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Contest Call to Action -->
    <div class="contest-cta">
        <div class="contest-info">
            <h2 class="contest-title">Join the Beer Contest!</h2>
            <p class="contest-description">
                Showcase your brewing skills and compete with the best brewers in the region.
            </p>
            <div class="countdown-section">
                <span class="countdown-label">Registration closes in:</span>
                <div class="countdown-timer">
                    <div class="countdown-item">
                        <span class="countdown-number">@daysLeft</span>
                        <span class="countdown-unit">Days</span>
                    </div>
                    <div class="countdown-item">
                        <span class="countdown-number">@hoursLeft</span>
                        <span class="countdown-unit">Hours</span>
                    </div>
                    <div class="countdown-item">
                        <span class="countdown-number">@minutesLeft</span>
                        <span class="countdown-unit">Minutes</span>
                    </div>
                </div>
            </div>
        </div>
        <button class="register-beer-btn" @onclick="NavigateToRegistration">
            <i class="fa fa-plus"></i>
            Register Your Beer
        </button>
    </div>
</div>


@code {
    // Target date for the countdown (June 30, 2025)
    private DateTime targetDate = new DateTime(2025, 6, 30);
    private Timer? timer;
    
    // Countdown values
    private int daysLeft;
    private int hoursLeft;
    private int minutesLeft;
    private int secondsLeft;
    
    protected override void OnInitialized()
    {
        // Set up timer to update every second
        timer = new Timer(1000);
        timer.Elapsed += TimerElapsed;
        timer.AutoReset = true;
        timer.Enabled = true;
        
        // Calculate initial values
        UpdateCountdown();
    }
    
    private void TimerElapsed(object? sender, ElapsedEventArgs e)
    {
        // Update countdown values
        UpdateCountdown();
        
        // Request UI update
        InvokeAsync(StateHasChanged);
    }
    
    private void UpdateCountdown()
    {
        TimeSpan remaining = targetDate - DateTime.Now;
        
        // Handle case where date is in the past
        if (remaining.TotalSeconds <= 0)
        {
            daysLeft = 0;
            hoursLeft = 0;
            minutesLeft = 0;
            secondsLeft = 0;
            return;
        }
        
        // Calculate the components
        daysLeft = remaining.Days;
        hoursLeft = remaining.Hours;
        minutesLeft = remaining.Minutes;
        secondsLeft = remaining.Seconds;
    }
    
    private void NavigateToRegistration()
    {
        Navigation.NavigateTo("/register-beer");
    }
    
    public void Dispose()
    {
        timer?.Dispose();
    }
}
    {
        if (timer != null)
        {
            timer.Stop();
            timer.Elapsed -= TimerElapsed;
            timer.Dispose();
        }
    }
}
